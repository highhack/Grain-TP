{"ast":null,"code":"import { authApi } from \"../api/api\";\nconst SET_AUTH_USER_DATA = 'SET-AUTH-USER-DATA';\nlet initialState = {\n  id: null,\n  email: null,\n  login: null,\n  isAuth: false\n};\n\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_AUTH_USER_DATA:\n      {\n        return { ...state,\n          ...action.data,\n          isAuth: true\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const setAuthUserData = (id, email, login) => ({\n  type: SET_AUTH_USER_DATA,\n  data: {\n    id,\n    email,\n    login\n  }\n});\nexport const getAuthUserData = (id, email, login) => {\n  return dispatch => {\n    authApi.me() // axios.get(`https://social-network.samuraijs.com/api/1.0/auth/me`, {withCredentials: true})\n    .then(data => {\n      if (data.resultCode === 0) {\n        let login = data.data.login;\n        dispatch(setAuthUserData(login));\n      }\n    });\n  };\n};\nexport default authReducer;","map":{"version":3,"sources":["/home/gerich/Documents/it-kamasutra/TP-way-of-samuray/tp-samuray/src/Redux/authReducer.ts"],"names":["authApi","SET_AUTH_USER_DATA","initialState","id","email","login","isAuth","authReducer","state","action","type","data","setAuthUserData","getAuthUserData","dispatch","me","then","resultCode"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,YAAtB;AAGA,MAAMC,kBAAkB,GAAG,oBAA3B;AASA,IAAIC,YAAkC,GAAG;AACrCC,EAAAA,EAAE,EAAE,IADiC;AAErCC,EAAAA,KAAK,EAAE,IAF8B;AAGrCC,EAAAA,KAAK,EAAE,IAH8B;AAIrCC,EAAAA,MAAM,EAAE;AAJ6B,CAAzC;;AAOA,MAAMC,WAAW,GAAG,CAACC,KAA2B,GAAGN,YAA/B,EAA6CO,MAA7C,KAA2F;AAC3G,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKT,kBAAL;AAAyB;AACrB,eAAO,EACH,GAAGO,KADA;AAEH,aAAGC,MAAM,CAACE,IAFP;AAGHL,UAAAA,MAAM,EAAE;AAHL,SAAP;AAKH;;AACD;AACI,aAAOE,KAAP;AATR;AAWH,CAZD;;AAeA,OAAO,MAAMI,eAAe,GAAG,CAACT,EAAD,EAAoBC,KAApB,EAA0CC,KAA1C,MAC1B;AACGK,EAAAA,IAAI,EAAET,kBADT;AAEGU,EAAAA,IAAI,EAAE;AAACR,IAAAA,EAAD;AAAKC,IAAAA,KAAL;AAAYC,IAAAA;AAAZ;AAFT,CAD0B,CAAxB;AASP,OAAO,MAAMQ,eAAe,GAAG,CAACV,EAAD,EAAoBC,KAApB,EAA0CC,KAA1C,KAAoE;AAC/F,SAAQS,QAAD,IAAwB;AAC3Bd,IAAAA,OAAO,CAACe,EAAR,GACI;AADJ,KAEKC,IAFL,CAEUL,IAAI,IAAI;AACV,UAAIA,IAAI,CAACM,UAAL,KAAoB,CAAxB,EAA2B;AACvB,YAAIZ,KAAK,GAAGM,IAAI,CAACA,IAAL,CAAUN,KAAtB;AACAS,QAAAA,QAAQ,CAACF,eAAe,CAACP,KAAD,CAAhB,CAAR;AACH;AACJ,KAPL;AAQH,GATD;AAUH,CAXM;AAaP,eAAeE,WAAf","sourcesContent":["import {authApi} from \"../api/api\";\nimport {Dispatch} from \"redux\";\n\nconst SET_AUTH_USER_DATA = 'SET-AUTH-USER-DATA'\n\n\nexport type InitialStateAuthType = {\n    id: number | null\n    email: string | null\n    login: string | null\n    isAuth: boolean\n}\nlet initialState: InitialStateAuthType = {\n    id: null,\n    email: null,\n    login: null,\n    isAuth: false\n}\n\nconst authReducer = (state: InitialStateAuthType = initialState, action: ActionsType): InitialStateAuthType => {\n    switch (action.type) {\n        case SET_AUTH_USER_DATA: {\n            return {\n                ...state,\n                ...action.data,\n                isAuth: true\n            }\n        }\n        default:\n            return state\n    }\n}\n\n\nexport const setAuthUserData = (id: number | null, email: string | null, login: string | null) =>\n    ({\n        type: SET_AUTH_USER_DATA,\n        data: {id, email, login}\n    } as const)\n\n\ntype ActionsType = ReturnType<typeof setAuthUserData>\n\nexport const getAuthUserData = (id: number | null, email: string | null, login: string | null) =>  {\n    return (dispatch: Dispatch) => {\n        authApi.me()\n            // axios.get(`https://social-network.samuraijs.com/api/1.0/auth/me`, {withCredentials: true})\n            .then(data => {\n                if (data.resultCode === 0) {\n                    let login = data.data.login\n                    dispatch(setAuthUserData(login))\n                }\n            })\n    }\n}\n\nexport default authReducer"]},"metadata":{},"sourceType":"module"}